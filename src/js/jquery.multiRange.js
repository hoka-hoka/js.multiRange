"use strict";

(function ($) {
  class eventEmitter {
    constructor() {
      this.listeners = {};
    }

    on(key, fn) {
      this.listeners[key] = (this.listeners[key] || []).concat(fn);
    }

    off(key, fn) {
      this.listeners[key] = (this.listeners[key] || []).filter(f => f !== fn);
    }

    emit(key, data) {
      (this.listeners[key] || []).forEach(function (fn) {
        fn(data);
      });
    }

  }

  class ListModel extends eventEmitter {
    constructor(options) {
      super();
      this.thumb = $('<div class="thumb">');
      this.popup = false;
      this.direction = 3;
      this.valueHight = 0;
      this.valueLow = 0;
      this._options = options;
      Object.keys(options).forEach(key => {
        this._options[key] = options[key];
      });
      this.current = this._options.range;

      if (!$(this.current).is('input.range[type="range"]')) {
        $.error(`Плагин неверно инициализирован (прим. <input type="range" class=range>`);
      }
    }

    init() {
      let value = this.current.getAttribute('value');
      let values = value === null ? [] : value.split(',');
      let current = $(this.current);

      if (this.hasProperty('multirange', 'multirange')) {
        this.ghost = current.clone().addClass('ghost');
        current = current.addClass('basic');
        const expr = this._options.min + (this._options.max - this._options.min) / 2;
        current.attr('value', values[0] || expr);
        this.ghost.attr('value', $.trim(values[1]) || expr);
        this.emit('addElement', {
          current,
          add: [this.ghost, this.thumb]
        });
      } else {
        current = current.addClass('basic');
        this.emit('addElement', {
          current,
          add: [this.thumb]
        });
      }

      this.Direction = ['left', 'right'];
      this.popup = this.Popup(true);
      this.Rotate(true);
      this.Scale(true);
      this.emit('moveRange', {});
      this.followProperty();
      this.updateProperty();
    }

    hasProperty(prop, value) {
      const currentData = $(this.current).data(prop);
      const currentProperty = this._options[prop];
      const status = ~$.inArray(value, [currentData, currentProperty]);
      return status;
    }

    set Direction(values) {
      $.map(values, v => {
        if (this.hasProperty('multirange', 'multirange')) {
          this.direction = 1;
        } else if (this.hasProperty('direction', v)) {
          if (v === 'left') {
            this.direction = 2;
          }
        }
      });
    }

    get Direction() {
      let range = $(this._options.range);

      switch (this.direction) {
        case 1:
          if (this.ghost) {
            return [Math.min(range.val(), this.ghost.val()), Math.max(range.val(), this.ghost.val())];
          } else throw new Error("не найден ghost");

          break;

        case 2:
          return [range.val(), 100];
          break;

        default:
          return [0, range.val()];
      }
    }

    Popup(value) {
      if (this.hasProperty('popup', value)) {
        let arrow = $('<div class="popup"><span></span><div class="arrow"></div>');

        if (this.ghost) {
          let arrowClone = arrow.clone(true);
          this.emit('addElement', {
            current: this.thumb,
            add: [arrow, arrowClone],
            method: 'append'
          });
        } else {
          this.emit('addElement', {
            current: this.thumb,
            add: [arrow],
            method: 'append'
          });
        }

        return true;
      }

      return false;
    }

    Rotate(value) {
      if (this.hasProperty('rotate', value)) {
        let rangeParent = $(this._options.range).parent();
        this.emit('addClass', {
          element: rangeParent,
          add: 'rotate--90'
        });
      }
    }

    Scale(value) {
      let current = $(this._options.range).parent();

      if (this.hasProperty('scale', value)) {
        let step = 0;
        let diff = (this._options.max - this._options.min) / 10;
        let scale = $('<ul class="scale"></ul>');

        while (step <= 10) {
          scale.append(`<li class="scale__item">${+this._options.min + diff * step}</li>`);
          ++step;
        }

        current.append(scale);
        this.emit('addElement', {
          current,
          add: [current]
        });
      }
    }

    followProperty() {
      this.valueLow = this.Direction[0];
      this.valueHight = this.Direction[1];
    }

    updateProperty() {
      const positionPercent = value => {
        return 100 * ((value - this._options.min) / (this._options.max - this._options.min)) + '%';
      };

      const faultRight = value => {
        return this._options.toffeeSize * (value - this._options.min) / (this._options.max - this._options.min);
      };

      const faultLeft = value => {
        return this._options.toffeeSize * (this._options.max - value) / (this._options.max - this._options.min);
      };

      function* revisionPercent() {
        for (var i = 0; i < 2; i++) {
          if (!i) {
            yield `${positionPercent(this.valueLow)} - ${faultRight(this.valueLow)}px`;
          } else {
            yield `${positionPercent(this.valueHight)} + ${faultLeft(this.valueHight)}px`;
          }
        }
      }

      ;
      const percent = [...revisionPercent.call(this)];
      this.emit('updateRange', {
        el: this.thumb,
        pos: percent
      });

      if (this.popup) {
        this.emit('updatePopup', {
          el: $(this.thumb).children()
        });
      }
    }

  }

  class ListView extends eventEmitter {
    constructor(model) {
      super();
      this._model = model;
      $(model._options.range).wrap('<div class="multirange"></div>');
      let rangeHeight = $(model._options.range).height();

      if (rangeHeight) {
        $(model._options.range).parent().height(rangeHeight);
      }
    }

    addElement({
      current,
      add,
      method = 'after'
    }) {
      current[method](add);
    }

    addClass({
      element,
      add
    }) {
      element.addClass(add);
    }

    updateRange(obj) {
      obj.el.css("--start", 'calc(' + obj.pos[0] + ')');
      obj.el.css("--stop", 'calc(' + obj.pos[1] + ')');
    }

    updatePopup(el, pos) {
      el.innerHTML = pos;
    }

  }

  class ListController extends eventEmitter {
    constructor(model, view) {
      super();
      this._model = model;
      this._view = view;

      this._model.on('addElement', obj => this.addElement(obj));

      this._model.on('addClass', obj => this.addClass(obj));

      this._model.on('moveRange', () => this.moveRange());

      this._model.on('updateRange', obj => this.updateRange(obj));

      this._model.on('updatePopup', obj => this.updatePopup(obj));
    }

    addElement(obj) {
      if (Array.isArray(obj.add)) {
        $.each(obj.add, (i, v) => {
          this._view.addElement({
            current: obj.current,
            add: obj.add[i],
            method: obj.method
          });
        });
      } else {
        this._view.addElement(obj);
      }
    }

    addClass(obj) {
      this._view.addClass({
        element: obj.element,
        add: obj.add
      });
    }

    moveRange() {
      let range = $(this._model._options.range);
      range.add(range.siblings('.ghost')).on('input', e => {
        this._model.followProperty();

        e.stopPropagation();

        this._model.updateProperty();
      });
    }

    updateRange(obj) {
      this._view.updateRange(obj);
    }

    updatePopup(obj) {
      function* generator() {
        yield this._model.valueLow.toString();
        return this._model.valueHight.toString();
      }

      let popupGenerator = generator.call(this);

      if (this._model.direction === 3) {
        popupGenerator.next();

        this._view.addClass({
          element: obj.el,
          add: 'right--0'
        });
      }

      obj.el.each((i, v) => {
        this._view.updatePopup($(v).children()[0], popupGenerator.next().value);
      });
    }

  }

  $.fn.multiRange = Object.assign(function (propertys) {
    $.each(this, function (i, v) {
      let target = {
        range: v,
        min: $(this).attr('min') || 0,
        max: $(this).attr('max') || 100
      };

      if ($(this).data('controller')) {
        $.error('Плагин уже был инициализирован');
      }

      Object.keys(propertys).forEach(keys => {
        if (!$.fn.multiRange.propertys.hasOwnProperty(keys)) {
          $.error('Передаваемого свойства ' + keys + ' не существует');
        }
      });
      let options = $.extend(target, $.fn.multiRange.propertys, propertys);
      const model = new ListModel(options);
      const view = new ListView(model);
      const controller = new ListController(model, view);
      model.init();
      $(this).data('controller', controller);
    });
    return this;
  }, {
    propertys: {
      toffeeSize: 0,
      multirange: false,
      popup: false,
      scale: false,
      direction: 'right'
    }
  });
})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3RzL2pxdWVyeS5tdWx0aVJhbmdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsQ0FBQyxVQUFTLENBQVQsRUFBVTtBQUVULFFBQU0sWUFBTixDQUFrQjtBQUFsQixJQUFBLFdBQUEsR0FBQTtBQUNTLFdBQUEsU0FBQSxHQUVILEVBRkc7QUFjUjs7QUFYQyxJQUFBLEVBQUUsQ0FBd0IsR0FBeEIsRUFBZ0MsRUFBaEMsRUFBdUQ7QUFDdkQsV0FBSyxTQUFMLENBQWUsR0FBZixJQUFzQixDQUFDLEtBQUssU0FBTCxDQUFlLEdBQWYsS0FBdUIsRUFBeEIsRUFBNEIsTUFBNUIsQ0FBbUMsRUFBbkMsQ0FBdEI7QUFDRDs7QUFDRCxJQUFBLEdBQUcsQ0FBd0IsR0FBeEIsRUFBZ0MsRUFBaEMsRUFBdUQ7QUFDeEQsV0FBSyxTQUFMLENBQWUsR0FBZixJQUFzQixDQUFDLEtBQUssU0FBTCxDQUFlLEdBQWYsS0FBdUIsRUFBeEIsRUFBNEIsTUFBNUIsQ0FBcUMsQ0FBRCxJQUE0QixDQUFDLEtBQUssRUFBdEUsQ0FBdEI7QUFDRDs7QUFDRCxJQUFBLElBQUksQ0FBd0IsR0FBeEIsRUFBZ0MsSUFBaEMsRUFBMEM7QUFDNUMsT0FBQyxLQUFLLFNBQUwsQ0FBZSxHQUFmLEtBQXVCLEVBQXhCLEVBQTRCLE9BQTVCLENBQW9DLFVBQVMsRUFBVCxFQUFnQztBQUNsRSxRQUFBLEVBQUUsQ0FBQyxJQUFELENBQUY7QUFDRCxPQUZEO0FBR0Q7O0FBZGU7O0FBaUJsQixRQUFNLFNBQU4sU0FBd0IsWUFBeEIsQ0FBOEo7QUFVNUosSUFBQSxXQUFBLENBQVksT0FBWixFQUE4QztBQUM1QztBQVBGLFdBQUEsS0FBQSxHQUE2QixDQUFDLENBQUMscUJBQUQsQ0FBOUI7QUFDQSxXQUFBLEtBQUEsR0FBaUIsS0FBakI7QUFDQSxXQUFBLFNBQUEsR0FBb0IsQ0FBcEI7QUFDQSxXQUFBLFVBQUEsR0FBcUIsQ0FBckI7QUFDQSxXQUFBLFFBQUEsR0FBbUIsQ0FBbkI7QUFJ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